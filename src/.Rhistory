write(varroainput14, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput14, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput15 <- paste(parameter15, inputvalue15, sep= " ")
write(varroainput15, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput15, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput15, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput16 <- paste(parameter16, inputvalue16, sep= " ")
write(varroainput16, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput16, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput16, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput17 <- paste(parameter17, inputvalue17, sep= " ")
write(varroainput17, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput17, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput18 <- paste(parameter18, inputvalue18, sep= "")
write(varroainput18, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
varroainput19 <- paste(parameter19, inputvalue19, sep= " ")
write(varroainput19, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
varroainput20 <- paste(parameter20, inputvalue20, sep= " ")
write(varroainput20, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput21, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput22, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput22, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput23 <- paste(parameter23, inputvalue23, sep=" ")
write(varroainput22, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput7, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput11, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput11, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput16, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput12, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
varroainput21 <- paste(parameter21, inputvalue21, sep= " ")
write(varroainput7, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput6, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput9, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput13, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput14, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput15, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput22 <- paste(parameter22, inputvalue22, sep= " ")
write(varroainput17, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput8, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput13, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput17, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput13 <- paste(parameter13, inputvalue13, sep= " ")
write(varroainput22, file = paste(vpdir_in_foliar, "input",i,".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput10, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput9 <- paste(parameter9, inputvalue9, sep= " ")
write(varroainput23, file = paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput23, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput24 <- paste(parameter24, inputvalue24, sep=" ")
write(varroainput24, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput24, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput24, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput25, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput25, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput26 <- paste(parameter26, inputvalue26, sep= " ")
write(varroainput26, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput26, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput26, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput27 <- paste(parameter27, inputvalue27, sep= " ")
write(varroainput27, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput27, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput27, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput28, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput28, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput29 <- paste(parameter29, inputvalue29, sep= " ")
write(varroainput28, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput26, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput23, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput29, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput29, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput29, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput25, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput27, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput24, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput28, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput29, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput30, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput30, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput31 <- paste(parameter31, inputvalue31, sep= " ")
write(varroainput31, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput31, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput32 <- paste(parameter32, inputvalue32, sep= " ")
write(varroainput32, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput32, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput32, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput25, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput30, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput32, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput25 <- paste(parameter25, inputvalue25, sep= " ")
write(varroainput31, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput23, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput30, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
varroainput33 <- paste(parameter33, inputvalue33, sep= " ")
write(varroainput33, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput34 <- paste(parameter34, inputvalue34, sep= " ")
write(varroainput34, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput35, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput35, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput35, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput36, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput36, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput36, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput37 <- paste(parameter37, inputvalue37, sep= " ")
write(varroainput37, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput37, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput37, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput38, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
varroainput38 <- paste(parameter38, inputvalue38, sep= " ")
write(varroainput31, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
varroainput30 <- paste(parameter30, inputvalue30, sep= " ")
varroainput36 <- paste(parameter36, inputvalue36, sep= " ")
varroainput35 <- paste(parameter35, inputvalue35, sep= " ")
write(varroainput35, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput28 <- paste(parameter28, inputvalue28, sep= " ")
write(varroainput33, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput34, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput34, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput36, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput37, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput33, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput34, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput33, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE, sep = "\n")
write(varroainput38, file = paste(vpdir_in_control, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput38, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput39 <- paste(parameter39, inputvalue39, sep= " ")
write(varroainput39, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput40 <- paste(parameter40, inputvalue40, sep= " ")
write(varroainput40, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput42 <- paste(parameter42, inputvalue42, sep= "")
varroainput43 <- paste(parameter43, inputvalue43, sep= " ")
write(varroainput43, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput44 <- paste(parameter44, inputvalue44, sep= " ")
write(varroainput45, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput46 <- paste(parameter46, inputvalue46, sep= " ")
write(varroainput46, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput47 <- paste(parameter47, inputvalue47, sep= " ")
write(varroainput48, file = paste(vpdir_in_control, "input", i, ".txt", sep=""), append = TRUE, sep = "\n")
write(varroainput48, file = paste(vpdir_in_foliar, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput48, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput48, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput49 <- paste(parameter49, inputvalue49, sep= " ")
write(varroainput49, file = paste(vpdir_in_control, "input", i, ".txt", sep=""), append = TRUE, sep = "\n")
varroainput48 <- paste(parameter48, inputvalue48, sep= " ")
write(varroainput38, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
varroainput45 <- paste(parameter45, inputvalue45, sep= " ")
varroainput41 <- paste(parameter41, inputvalue41, sep= "")
write(varroainput41, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput47, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput49, file = paste(vpdir_in_foliar, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput44, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput42, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write(varroainput49, file = paste(vpdir_in_seed, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
write("ESeedConcentration= 0", file = paste(vpdir_in_control, "input", i, ".txt", sep=""), append = TRUE, sep = "\n")
#varroainputweather <- paste(weather, weathervalue, sep= " ")
#write(varroainputweather, file= paste(vpdir_in_foliar, "input", i, ".txt", sep=""), append= TRUE)
write(varroainput49, file = paste(vpdir_in_soil, "input", i, ".txt", sep = ""), append = TRUE, sep = "\n")
}
varroainput9
adLD50
source(paste(vpdir,"src/02write_input.R",sep = ""))
print(paste(file.exists(vpdir_executable), ": executable file at", vpdir_executable))
#sample input
sample_input_file <- paste(vpdir_in_control, "input1000.txt", sep="")
print(paste(file.exists(sample_input_file), ": sample input file at", sample_input_file))
#varroapop file
varroapop_file <- paste(vpdir_exe, vrp_filename, sep="")
print(paste(file.exists(varroapop_file), ": varroapop inputs file at", varroapop_file))
#weather file
weather_input <- paste(vpdir_exe, vrp_weather, sep="")
print(paste(file.exists(weather_input), ": weather file at", weather_input))
#varroapop <-> weather file message
for (i in 1:1) {
# n<-inputtest[i]
inputfile<- paste("input",i,".txt", sep="")
outputfile<- paste("results",i,".txt", sep="")
logfile<- paste("log",i,".txt", sep="")
vpdir_command <- paste(vpdir_exe, vrp_filename,
" /b /or ", vpdir_out_control, outputfile,
" /i ", vpdir_in_control, inputfile, " /ol ", vpdir_log, logfile, sep="")
print(paste(vpdir_executable, vpdir_command, sep=" "))
system2(vpdir_executable, vpdir_command)
}
vpdir<-path.expand("C:/Users/ckuan/Varroapop/")
vpdir<-path.expand("C:/Users/ckuan/git/beeRpop/")
vpdir2<-path.expand("C:/Users/ckuan/Varroapop/")
vpdir2_executable <- paste(vpdir2, vp_binary, sep="")
vpdir_executable
vpdir2_executable
paste(vpdir2, vrp_filename,
" /b /or ", vpdir_out_control, outputfile,
" /i ", vpdir_in_control, inputfile, " /ol ", vpdir_log, logfile, sep="")
inputfile<- paste("input",i,".txt", sep="")
outputfile<- paste("results",i,".txt", sep="")
logfile<- paste("log",i,".txt", sep="")
vpdir_command <- paste(vpdir2, vrp_filename,
" /b /or ", vpdir_out_control, outputfile,
" /i ", vpdir_in_control, inputfile, " /ol ", vpdir_log, logfile, sep="")
print(paste(vpdir_executable, vpdir_command, sep=" "))
vpdir_executable
vpdir_command
system2(vpdir2_executable, vpdir_command)
print(paste(vpdir_executable, vpdir_command, sep=" "))
vrp_filename
vpdir_command <- paste(vpdir, vrp_filename,
" /b /or ", vpdir_out_control, outputfile,
" /i ", vpdir_in_control, inputfile, " /ol ", vpdir_log, logfile, sep="")
print(paste(vpdir_executable, vpdir_command, sep=" "))
system2(vpdir_executable, vpdir_command)
system2(vpdir_executable, vpdir_command)
vpdir
vpdir_exe
vpdir
vpdir_command <- paste(vpdir_exe, vrp_filename,
" /b /or ", vpdir_out_control, outputfile,
" /i ", vpdir_in_control, inputfile, " /ol ", vpdir_log, logfile, sep="")
print(paste(vpdir_executable, vpdir_command, sep=" "))
system2(vpdir_executable, vpdir_command)
vpdir2_executable
vpdir
vpdir_exe
vpdir_command <- paste(vpdir2, vrp_filename,
" /b /or ", vpdir_out_control, outputfile,
" /i ", vpdir_in_control, inputfile, " /ol ", vpdir_log, logfile, sep="")
print(paste(vpdir2_executable, vpdir_command, sep=" "))
system2(vpdir2_executable, vpdir_command)
vpdir_command <- paste(vpdir2, vrp_filename,
" /b /or ", vpdir_out_control, outputfile,
" /i ", vpdir_in_control, inputfile, " /ol ", vpdir_log, logfile, sep="")
print(paste(vpdir2_executable, vpdir_command, sep=" "))
system2(vpdir2_executable, vpdir_command)
vpdir_command <- paste(vpdir_exe, vrp_filename,
" /b /or ", vpdir_out_control, outputfile,
" /i ", vpdir_in_control, inputfile, " /ol ", vpdir_log, logfile, sep="")
print(paste(vpdir_executable, vpdir_command, sep=" "))
system2(vpdir_executable, vpdir_command)
vpdir2_command <- paste(vpdir2, vrp_filename,
" /b /or ", vpdir_out_control, outputfile,
" /i ", vpdir_in_control, inputfile, " /ol ", vpdir_log, logfile, sep="")
print(paste(vpdir2_executable, vpdir_command, sep=" "))
system2(vpdir2_executable, vpdir_command)
system2(vpdir2_executable, vpdir_command)
system2(vpdir_executable, vpdir_command)
print(paste(vpdir2_executable, vpdir_command, sep=" "))
print(paste(vpdir2_executable, vpdir_command, sep=" "))
system2(vpdir2_executable, vpdir2_command)
print(paste(vpdir2_executable, vpdir2_command, sep=" "))
file.exists(vpdir_out_control)
library(plyr)
library(reshape2)
library(ggplot2)
library(grid)
library(gridExtra)
library(sensitivity)
library(abind)
if(Sys.info()[4]=="ACKUAN-PC"){
vpdir<-path.expand("C:/gitrepo/beeRpop/")
# varroapop file (without directory, the file needs to be in vpdir_exe above)
vrp_filename <- "default_carmen.vrp"
}
vpdir_input <- paste(vpdir, "input/", sep = "")
vpdir_output <- paste(vpdir, "output/", sep = "")
vpdir_log <- paste(vpdir, "log/", sep = "")
vpdir_fig <- paste(vpdir, "figures/", sep = "")
vpdir_exe <- paste(vpdir, "exe/", sep = "")
vpdir_io <- paste(vpdir, "io/", sep = "")
vpdir_in_foliar <- paste(vpdir_input, "foliar/", sep = "")
vpdir_in_control <- paste(vpdir_input, "control/", sep = "")
vpdir_in_seed <- paste(vpdir_input, "seed/", sep = "")
vpdir_in_soil <- paste(vpdir_input, "soil/", sep = "")
vpdir_out_foliar <- paste(vpdir_output, "foliar/", sep = "")
vpdir_out_control <- paste(vpdir_output, "control/", sep = "")
vpdir_out_seed <- paste(vpdir_output, "seed/", sep = "")
vpdir_out_soil <- paste(vpdir_output, "soil/", sep = "")
vpdir_weather <- paste(vpdir, "weather/", sep = "")
vpdir_sobol <- paste(vpdir, "sobol/", sep = "")
#varroapop executable version
vp_binary <- "VarroaPop_3_2_6_11.exe"
vpdir_executable <- paste(vpdir_exe, vp_binary, sep="")
vpdir2_executable <- paste(vpdir2, vp_binary, sep="")
#number of simulations
Nsims <- 5000
#weather file
#can be .dvf or .wth
vrp_weather <- "w93193-tempadj.dvf"
#vrp_weather <- "Midwest5Yr.wth"
#simulation start and end
#must have mm/dd/yyyy format
simstart <- "01/01/1988"
simend <- "12/31/1990"
source(paste(vpdir,"src/01parameterize_simulation.R",sep = ""))
scan(file = paste(vpdir_log, "log1.txt", sep=""), what = "raw")
source(paste(vpdir,"src/02write_input.R",sep = ""))
source(paste(vpdir,"src/03simulate_w_exe.R",sep = ""))
source(paste(vpdir,"src/03simulate_w_exe.R",sep = ""))
source(paste(vpdir,"src/03simulate_w_exe.R",sep = ""))
for (i in 1:Nsims) {
# n<-inputtest[i]
inputfile<- paste("input",i,".txt", sep="")
outputfile<- paste("results",i,".txt", sep="")
logfile<- paste("log",i,".txt", sep="")
# username install, vrp reference for weather file has to point to vpdir2 directory
# vpdir2_command <- paste(vpdir2, vrp_filename,
#                        " /b /or ", vpdir_out_control, outputfile,
#                        " /i ", vpdir_in_control, inputfile, " /ol ", vpdir_log, logfile, sep="")
# print(paste(vpdir2_executable, vpdir2_command, sep=" "))
# system2(vpdir2_executable, vpdir2_command)
#git executable, vrp reference for weather file has to point to vpdir_exe directory
vpdir_command <- paste(vpdir_exe, vrp_filename,
" /b /or ", vpdir_out_control, outputfile,
" /i ", vpdir_in_control, inputfile, " /ol ", vpdir_log, logfile, sep="")
print(paste(vpdir_executable, vpdir_command, sep=" "))
system2(vpdir_executable, vpdir_command)
}
source(paste(vpdir,"src/04read_output.R",sep = ""))
#check to make sure required packages are installed
list.of.packages <- c("plyr", "dplyr", "reshape2", "ggplot2", "grid", "gridExtra", "sensitivity", "abind",
"ppcor")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)>0) {install.packages(new.packages)}
#load library dependencies
library(plyr)
library(reshape2)
library(ggplot2)
library(grid)
library(gridExtra)
library(sensitivity)
library(abind)
#echo environment
Sys.info()
Sys.info()[4]
.Platform
version
#Determine path directory based on the user machine######
#tom epa windows 2
if(Sys.info()[4]=="DZ2626UTPURUCKE"){
vpdir<-path.expand("k:/git/beeRpop/")
vpdir2<-path.expand("k:/git/beeRpop/")
# varroapop file (without directory, the file needs to be in vpdir_exe above)
vrp_filename <- "comparison_stp_epaw.vrp"
}
#tom mac air
if(Sys.info()[4]=="stp-air"){
vpdir<-path.expand("~/git/beeRpop/")
}
#tom mac air
if(Sys.info()[4]=="stp-air.local"){
vpdir<-path.expand("~/git/beeRpop/")
}
#marcia epa computer
if(Sys.info()[4]=="LZ2626UMSNYDE02"){
vpdir<-path.expand("C:/Users/msnyde02/varroapoptest2/")
# varroapop file (without directory, the file needs to be in vpdir_exe above)
vrp_filename <- "comparison.vrp"
}
#carmen personal laptop
if(Sys.info()[4]=="Ashleys-MBP"||Sys.info()[4]=="Ashleys-MacBook-Pro-2.local"||
Sys.info()[4]=="Ashleys-MBP-2"||Sys.info()[4]=="Ashleys-MacBook-Pro.local") {
vpdir<-path.expand("~/git/beeRpop/")
# varroapop file (without directory, the file needs to be in vpdir_exe above)
vrp_filename <- "default.vrp"
}
#carmen other personal laptop
if(Sys.info()[4]=="ACKUAN-PC"){
vpdir<-path.expand("C:/gitrepo/beeRpop/")
# varroapop file (without directory, the file needs to be in vpdir_exe above)
vrp_filename <- "default_carmen.vrp"
}
#carmen epa desktop 2
if(Sys.info()[4]=="DZ2626UCKUAN"){
vpdir<-path.expand("C:/Users/ckuan/git/beeRpop/")
vpdir2<-path.expand("C:/Users/ckuan/Varroapop/")
# varroapop file (without directory, the file needs to be in vpdir_exe above)
vrp_filename <- "default_carmen.vrp"
}
#andrew epa
if(Sys.info()[4]=="LZ2032EAKANAREK"){
vpdir <- path.expand("C:/Users/AKanarek/Documents/GitHub/beeRpop/")
# varroapop file (without directory, the file needs to be in vpdir_exe above)
vrp_filename <- "comparison.vrp"
}
if(Sys.info()[4]=="DZ2626UKWOLFE"){
vpdir<-path.expand("E:/VarroaPop/beeRpop/")
# varroapop file (without directory, the file needs to be in vpdir_exe above)
vrp_filename <- "comparison_kurt.vrp"
}
#subdirectories
vpdir_input <- paste(vpdir, "input/", sep = "")
vpdir_output <- paste(vpdir, "output/", sep = "")
vpdir_log <- paste(vpdir, "log/", sep = "")
vpdir_fig <- paste(vpdir, "figures/", sep = "")
vpdir_exe <- paste(vpdir, "exe/", sep = "")
vpdir_io <- paste(vpdir, "io/", sep = "")
vpdir_in_foliar <- paste(vpdir_input, "foliar/", sep = "")
vpdir_in_control <- paste(vpdir_input, "control/", sep = "")
vpdir_in_seed <- paste(vpdir_input, "seed/", sep = "")
vpdir_in_soil <- paste(vpdir_input, "soil/", sep = "")
vpdir_out_foliar <- paste(vpdir_output, "foliar/", sep = "")
vpdir_out_control <- paste(vpdir_output, "control/", sep = "")
vpdir_out_seed <- paste(vpdir_output, "seed/", sep = "")
vpdir_out_soil <- paste(vpdir_output, "soil/", sep = "")
vpdir_weather <- paste(vpdir, "weather/", sep = "")
vpdir_sobol <- paste(vpdir, "sobol/", sep = "")
#varroapop executable version
vp_binary <- "VarroaPop_3_2_6_11.exe"
vpdir_executable <- paste(vpdir_exe, vp_binary, sep="")
vpdir2_executable <- paste(vpdir2, vp_binary, sep="")
#number of simulations
Nsims <- 5000
#weather file
#can be .dvf or .wth
vrp_weather <- "w93193-tempadj.dvf"
#vrp_weather <- "Midwest5Yr.wth"
#simulation start and end
#must have mm/dd/yyyy format
simstart <- "01/01/1988"
simend <- "12/31/1990"
source(paste(vpdir,"src/04read_output.R",sep = ""))
df <- read.table(paste(vpdir_out_control,"results",i,".txt", sep=""), header= FALSE, sep= "",
skip = 6, stringsAsFactors = FALSE, row.names=NULL)
dim(df)
nrows <- dim(df)[[1]] #this is dependent on the duration of the simulation as set in the comparison.vrp file
timearray<- array(data=NA, c(nrows))
ncols <- dim(df)[[2]]
timearray[2:nrows]<- df[2:nrows,1]
i <- 1
df <- read.table(paste(vpdir_out_control,"results",i,".txt", sep=""), header= FALSE, sep= "",
skip = 6, stringsAsFactors = FALSE, row.names=NULL)
dim(df)
nrows <- dim(df)[[1]] #this is dependent on the duration of the simulation as set in the comparison.vrp file
ncols <- dim(df)[[2]]
timearray<- array(data=NA, c(nrows))
timearray[2:nrows]<- df[2:nrows,1]
timearray<- as.Date(timearray,"%m/%d/%Y")
timediff <- timearray[3]-timearray[2]
timearray[1] <- timearray[2]-timediff
length(timearray)
source(paste(vpdir,"src/04read_output.R",sep = ""))
memory.limit(memory.limit())
memory.limit()
memory.size()
#load library dependencies
library(plyr)
library(reshape2)
library(ggplot2)
library(grid)
library(gridExtra)
library(sensitivity)
library(abind)
i <- 1
df <- read.table(paste(vpdir_out_control,"results",i,".txt", sep=""), header= FALSE, sep= "",
skip = 6, stringsAsFactors = FALSE, row.names=NULL)
dim(df)
nrows <- dim(df)[[1]] #this is dependent on the duration of the simulation as set in the comparison.vrp file
ncols <- dim(df)[[2]]
timearray<- array(data=NA, c(nrows))
timearray[2:nrows]<- df[2:nrows,1]
timearray<- as.Date(timearray,"%m/%d/%Y")
timediff <- timearray[3]-timearray[2]
timearray[1] <- timearray[2]-timediff
length(timearray)
tdarray_control <- array(data=NA, c(nrows,ncols-1,Nsims))
dim(tdarray_control)
for (i in 1:Nsims) {
df <- read.table(paste(vpdir_out_control,"results",i,".txt", sep=""), header= FALSE, sep= "",
skip = 6, stringsAsFactors = FALSE, row.names=NULL)
newarray <- df[,2:ncols]
tdarray_control[1:nrows,1:(ncols-1),i] <- abind(newarray[1:nrows,1:(ncols-1)], along=3)
}
save(tdarray_control, file = paste(vpdir_out_control,"tdarray_control.RData", sep = ""))
gc()
tdarray_control <- array(data=NA, c(nrows,ncols-1,Nsims))
dim(tdarray_control)
for (i in 1:Nsims) {
df <- read.table(paste(vpdir_out_control,"results",i,".txt", sep=""), header= FALSE, sep= "",
skip = 6, stringsAsFactors = FALSE, row.names=NULL)
newarray <- df[,2:ncols]
tdarray_control[1:nrows,1:(ncols-1),i] <- abind(newarray[1:nrows,1:(ncols-1)], along=3)
}
memory.limit(4000)
tdarray_control <- array(data=NA, c(nrows,ncols-1,Nsims))
dim(tdarray_control)
for (i in 1:Nsims) {
df <- read.table(paste(vpdir_out_control,"results",i,".txt", sep=""), header= FALSE, sep= "",
skip = 6, stringsAsFactors = FALSE, row.names=NULL)
newarray <- df[,2:ncols]
tdarray_control[1:nrows,1:(ncols-1),i] <- abind(newarray[1:nrows,1:(ncols-1)], along=3)
}
save(tdarray_control, file = paste(vpdir_out_control,"tdarray_control.RData", sep = ""))
rm(tdarray_control)
memory.size()
memory.size(max=TRUE)
tdarray_control <- array(data=NA, c(nrows,ncols-1,Nsims))
dim(tdarray_control)
for (i in 1:Nsims) {
df <- read.table(paste(vpdir_out_control,"results",i,".txt", sep=""), header= FALSE, sep= "",
skip = 6, stringsAsFactors = FALSE, row.names=NULL)
newarray <- df[,2:ncols]
tdarray_control[1:nrows,1:(ncols-1),i] <- abind(newarray[1:nrows,1:(ncols-1)], along=3)
}
save(tdarray_control, file = paste(vpdir_out_control,"tdarray_control.RData", sep = ""))
rm(tdarray_control)
memory.profile()
memory.limit()
tdarray_control <- array(data=NA, c(nrows,ncols-1,Nsims))
dim(tdarray_control)
for (i in 1:Nsims) {
df <- read.table(paste(vpdir_out_control,"results",i,".txt", sep=""), header= FALSE, sep= "",
skip = 6, stringsAsFactors = FALSE, row.names=NULL)
newarray <- df[,2:ncols]
tdarray_control[1:nrows,1:(ncols-1),i] <- abind(newarray[1:nrows,1:(ncols-1)], along=3)
}
save(tdarray_control, file = paste(vpdir_out_control,"tdarray_control.RData", sep = ""))
rm(tdarray_control)
